# 项目创建快速参考

## 创建流程

```
1. 创建项目 (带 teamId) → 获得 projectId
2. 创建里程碑 (使用 projectId)
```

---

## 1. 创建项目

**POST** `/projects`

```json
{
  "title": "项目标题",
  "content": "项目描述",
  "startTime": "2025-01-01T00:00:00",
  "endTime": "2025-12-31T23:59:59",
  "projectStatus": "未完成",
  "teamId": 1  // ← 必填
}
```

**响应**:
```json
{
  "projectId": 123,  // ← 用于创建里程碑
  "title": "项目标题",
  "teamId": 1,
  "teamName": "开发一组",
  ...
}
```

---

## 2. 创建里程碑

**POST** `/milestone`

```json
{
  "title": "里程碑标题",
  "content": "里程碑描述",
  "projectId": 123  // ← 使用上一步的 projectId
}
```

**响应**:
```json
{
  "milestoneId": 456,
  "title": "里程碑标题"
}
```

---

## 获取团队列表

**GET** `/projects/teams`

```json
[
  {
    "teamId": 1,
    "teamName": "开发一组",
    "departmentId": 1,
    "departmentName": "技术部"
  }
]
```

---

## 前端代码示例

```typescript
// 1. 创建项目
const projectRes = await fetch('/projects', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    title: '新项目',
    teamId: 1  // 必填
  })
});
const project = await projectRes.json();

// 2. 创建里程碑
const milestoneRes = await fetch('/milestone', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    title: '第一阶段',
    projectId: project.projectId  // 使用返回的 projectId
  })
});
const milestone = await milestoneRes.json();
```

---

## 重要提示

- ✅ **teamId 必填** - 创建项目时必须提供
- ✅ **保存 projectId** - 用于后续创建里程碑
- ✅ **按顺序调用** - 先项目后里程碑
- ⚠️ **仅 CEO 可调用** - position=0
