spring.application.name=backend

# MySQL 数据库连接
spring.datasource.url=jdbc:mysql://localhost:3306/pandora_repo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=Gkm104021
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Flyway 配置（可选，默认自动扫描 db/migration）
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration,classpath:db/testdata
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=false

# 后端url
server.port = 8080
server.address = 0.0.0.0

management.endpoints.web.exposure.include=health,info

# ===== Redis 配置 =====
# Redis 服务器地址
spring.data.redis.host=localhost
# Redis 端口
spring.data.redis.port=6379
# Redis 密码（本地无密码可不配置）
# spring.data.redis.password=
# Redis 数据库索引（0-15）
spring.data.redis.database=0
# 连接超时时间（毫秒）
spring.data.redis.timeout=3000

# Redis 连接池配置 (Lettuce)
spring.data.redis.lettuce.pool.max-active=15
spring.data.redis.lettuce.pool.max-idle=10
spring.data.redis.lettuce.pool.min-idle=5
spring.data.redis.lettuce.pool.max-wait=2000ms

# Redisson 配置（分布式锁）
# Redisson 会自动查找 classpath:redisson-config.yml
# 如果需要指定路径，使用: spring.redisson.config=classpath:redisson-config.yml

# ===== Token 清理配置 =====
# 启动时是否清理过期 Token（0=不清理，1=清理）
cleanup.on.start=0

# ===== 文件上传配置 =====
# 我们的文件上传存储目录
# (使用 / 代替 \，Java 会自动处理 Windows 路径)
file.upload-dir=D:/pandora/

# 增加文件上传大小限制
# 默认 Spring 限制为 1MB，这太小了
spring.servlet.multipart.max-file-size=20MB
spring.servlet.multipart.max-request-size=100MB
