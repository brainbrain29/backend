# æœç´¢åŠŸèƒ½å®ç°è¯´æ˜

> **æ–‡æ¡£æ—¶é—´**: 2025-11-18  
> **åŠŸèƒ½èŒƒå›´**: ä»»åŠ¡ã€æ—¥å¿—ã€é€šçŸ¥ã€é‡è¦äº‹é¡¹çš„æœç´¢åŠŸèƒ½

---

## ğŸ“‹ å·²å®ç°çš„æœç´¢åŠŸèƒ½

| æ¨¡å— | æ¥å£ | æœç´¢èŒƒå›´ | çŠ¶æ€ |
|------|------|---------|------|
| **ä»»åŠ¡æœç´¢** | `GET /tasks/search` | æ ‡é¢˜ã€å†…å®¹ã€æ‰§è¡Œè€…ã€å‘é€è€… | âœ… å·²å®ç° |
| **æ—¥å¿—æœç´¢** | `GET /logs/search` | å†…å®¹ | âœ… å·²ä¼˜åŒ– |
| **é€šçŸ¥æœç´¢** | `GET /notices/search` | å†…å®¹ã€å‘é€è€… | âœ… å·²å®ç° |
| **é‡è¦äº‹é¡¹æœç´¢** | `GET /matters-dashboard/matters` | å†…å®¹ + è¿‡æ»¤ | âœ… å·²ä¼˜åŒ– |
| **å‘˜å·¥æœç´¢** | - | - | âŒ æœªå®ç° |
| **å›¢é˜Ÿæœç´¢** | - | - | âŒ æœªå®ç° |
| **é¡¹ç›®æœç´¢** | - | - | âŒ æœªå®ç° |

---

## ğŸ” è¯¦ç»†åŠŸèƒ½åˆ†æ

### **1. ä»»åŠ¡æœç´¢** âœ… å·²å®ç°

#### **æ¥å£ä¿¡æ¯**

```
GET /tasks/search?keyword={keyword}
Authorization: Bearer {token}
```

#### **æœç´¢èŒƒå›´**

```sql
-- TaskRepository.java
SELECT DISTINCT t FROM Task t
LEFT JOIN t.assignee assignee
LEFT JOIN t.sender sender
WHERE LOWER(t.title) LIKE LOWER(CONCAT('%', :keyword, '%'))
   OR LOWER(COALESCE(t.content, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
   OR LOWER(COALESCE(assignee.employeeName, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
   OR LOWER(COALESCE(sender.employeeName, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
```

**æœç´¢å­—æ®µ**ï¼š
- âœ… ä»»åŠ¡æ ‡é¢˜ (`title`)
- âœ… ä»»åŠ¡å†…å®¹ (`content`)
- âœ… æ‰§è¡Œè€…å§“å (`assignee.employeeName`)
- âœ… å‘é€è€…å§“å (`sender.employeeName`)

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸åŒºåˆ†å¤§å°å†™ï¼ˆ`LOWER()`ï¼‰
- âœ… æ¨¡ç³ŠåŒ¹é…ï¼ˆ`LIKE '%keyword%'`ï¼‰
- âœ… å¤„ç† NULL å€¼ï¼ˆ`COALESCE()`ï¼‰
- âœ… å»é‡ï¼ˆ`DISTINCT`ï¼‰

#### **å®ç°ä»£ç **

```java
// TaskController.java
@GetMapping("/search")
public ResponseEntity<List<TaskDTO>> searchTasks(@RequestParam("keyword") String keyword) {
    List<TaskDTO> tasks = taskService.searchTasks(keyword);
    return new ResponseEntity<>(tasks, HttpStatus.OK);
}

// TaskService.java
public List<TaskDTO> searchTasks(String keyword) {
    if (keyword == null || keyword.trim().isEmpty()) {
        return Collections.emptyList();
    }
    
    List<Task> tasks = taskRepository.searchByKeyword(keyword.trim());
    return tasks.stream()
        .map(this::convertToDTO)
        .collect(Collectors.toList());
}
```

#### **ä½¿ç”¨ç¤ºä¾‹**

```bash
# æœç´¢åŒ…å«"æŠ¥å‘Š"çš„ä»»åŠ¡
GET /tasks/search?keyword=æŠ¥å‘Š

# æœç´¢æ‰§è¡Œè€…ä¸º"å¼ ä¸‰"çš„ä»»åŠ¡
GET /tasks/search?keyword=å¼ ä¸‰

# æœç´¢å†…å®¹åŒ…å«"ç´§æ€¥"çš„ä»»åŠ¡
GET /tasks/search?keyword=ç´§æ€¥
```

**è¿”å›ç»“æœ**ï¼š
```json
[
  {
    "taskId": 1,
    "title": "å®Œæˆæœˆåº¦æŠ¥å‘Š",
    "content": "éœ€è¦åœ¨æœ¬å‘¨äº”å‰å®Œæˆ",
    "assigneeName": "å¼ ä¸‰",
    "senderName": "æå››",
    "taskStatus": 1,
    "taskPriority": 2
  }
]
```

---

### **2. æ—¥å¿—æœç´¢** âœ… å·²ä¼˜åŒ–

#### **æ¥å£ä¿¡æ¯**

```
GET /logs/search?keyword={keyword}
Authorization: Bearer {token}
```

#### **æœç´¢èŒƒå›´**

```sql
-- LogRepository.javaï¼ˆâœ… å·²ä¼˜åŒ–ï¼‰
SELECT l FROM Log l 
LEFT JOIN FETCH l.employee 
LEFT JOIN FETCH l.task 
WHERE LOWER(COALESCE(l.content, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
```

**æœç´¢å­—æ®µ**ï¼š
- âœ… æ—¥å¿—å†…å®¹ (`content`)

**ç‰¹ç‚¹**ï¼š
- âœ… æ¨¡ç³ŠåŒ¹é…
- âœ… é¢„åŠ è½½å…³è”æ•°æ®ï¼ˆ`LEFT JOIN FETCH`ï¼‰
- âœ… **ä¸åŒºåˆ†å¤§å°å†™**ï¼ˆä½¿ç”¨ `LOWER()`ï¼‰âœ¨ å·²ä¼˜åŒ–
- âœ… **å¤„ç† NULL å€¼**ï¼ˆä½¿ç”¨ `COALESCE()`ï¼‰âœ¨ å·²ä¼˜åŒ–

#### **å®ç°ä»£ç **

```java
// LogController.java
@GetMapping("/search")
public ResponseEntity<List<LogDTO>> searchLogs(@RequestParam("keyword") String keyword) {
    List<LogDTO> logs = logService.searchLogs(keyword);
    return ResponseEntity.ok(logs);
}

// LogService.java
public List<LogDTO> searchLogs(String keyword) {
    if (keyword == null || keyword.trim().isEmpty()) {
        return Collections.emptyList();
    }
    List<Log> logs = logRepository.searchByKeyword(keyword.trim());
    return convertToDtoList(logs);
}
```

#### **ä½¿ç”¨ç¤ºä¾‹**

```bash
# æœç´¢åŒ…å«"ä¼šè®®"çš„æ—¥å¿—
GET /logs/search?keyword=ä¼šè®®

# æœç´¢åŒ…å«"bug"çš„æ—¥å¿—
GET /logs/search?keyword=bug
```

**è¿”å›ç»“æœ**ï¼š
```json
[
  {
    "logId": 1,
    "content": "ä»Šå¤©å‚åŠ äº†é¡¹ç›®ä¼šè®®ï¼Œè®¨è®ºäº†éœ€æ±‚å˜æ›´",
    "employeeName": "å¼ ä¸‰",
    "emoji": "ğŸ˜Š",
    "createTime": "2025-11-18T10:00:00"
  }
]
```

---

### **3. é€šçŸ¥æœç´¢** âœ… å·²å®ç°

#### **æ¥å£ä¿¡æ¯**

```
GET /notices/search?keyword={keyword}
Authorization: Bearer {token}
```

#### **æœç´¢èŒƒå›´**

```sql
-- NoticeRepository.java
SELECT n FROM Notice n
LEFT JOIN n.sender sender
WHERE LOWER(COALESCE(n.content, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
   OR LOWER(COALESCE(sender.employeeName, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
```

**æœç´¢å­—æ®µ**ï¼š
- âœ… é€šçŸ¥å†…å®¹ (`content`)
- âœ… å‘é€è€…å§“å (`sender.employeeName`)

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸åŒºåˆ†å¤§å°å†™
- âœ… å¤„ç† NULL å€¼
- âœ… åªè¿”å›å½“å‰ç”¨æˆ·ç›¸å…³çš„é€šçŸ¥ï¼ˆæƒé™æ§åˆ¶ï¼‰

#### **å®ç°ä»£ç **

```java
// NoticeController.java
@GetMapping("/search")
public ResponseEntity<?> searchNotices(
    @RequestAttribute("userId") Integer userId,
    @RequestParam("keyword") String keyword) {
    
    if (userId == null) {
        return ResponseEntity.status(401).body("æœªæˆæƒï¼šæ— æ•ˆçš„ Token");
    }
    
    if (keyword == null || keyword.trim().isEmpty()) {
        return ResponseEntity.badRequest().body("æœç´¢å…³é”®è¯ä¸èƒ½ä¸ºç©º");
    }
    
    List<NoticeDTO> notices = noticeService.searchNotices(keyword, userId);
    return ResponseEntity.ok(notices);
}

// NoticeService.java
public List<NoticeDTO> searchNotices(String keyword, Integer userId) {
    if (keyword == null || keyword.trim().isEmpty()) {
        return Collections.emptyList();
    }
    
    // 1. æœç´¢æ‰€æœ‰åŒ¹é…çš„é€šçŸ¥
    List<Notice> allNotices = noticeRepository.searchByKeyword(keyword.trim());
    
    // 2. è¿‡æ»¤ï¼šåªè¿”å›å½“å‰ç”¨æˆ·ç›¸å…³çš„é€šçŸ¥
    List<NoticeDTO> results = new ArrayList<>();
    for (Notice notice : allNotices) {
        NoticeEmployeeId id = new NoticeEmployeeId();
        id.setNoticeId(notice.getNoticeId());
        id.setReceiverId(userId);
        
        noticeEmployeeRepository.findById(id).ifPresent(ne -> {
            results.add(toDTO(ne));
        });
    }
    
    return results;
}
```

#### **ä½¿ç”¨ç¤ºä¾‹**

```bash
# æœç´¢åŒ…å«"ä¼šè®®"çš„é€šçŸ¥
GET /notices/search?keyword=ä¼šè®®

# æœç´¢å‘é€è€…ä¸º"å¼ ä¸‰"çš„é€šçŸ¥
GET /notices/search?keyword=å¼ ä¸‰
```

**è¿”å›ç»“æœ**ï¼š
```json
[
  {
    "noticeId": 1,
    "content": "æ˜å¤©ä¸‹åˆ2ç‚¹å¼€ä¼š",
    "senderName": "å¼ ä¸‰",
    "noticeStatus": "æœªæŸ¥çœ‹",
    "createTime": "2025-11-18T10:00:00"
  }
]
```

---

### **4. é‡è¦äº‹é¡¹æœç´¢** âœ… å·²ä¼˜åŒ–

#### **æ¥å£ä¿¡æ¯**

```
GET /matters-dashboard/matters?keyword={keyword}&status={status}&departmentId={departmentId}&page={page}&size={size}
Authorization: Bearer {token}
```

#### **æœç´¢èŒƒå›´**

```sql
-- ImportantMatterRepository.javaï¼ˆâœ… å·²ä¼˜åŒ–ï¼‰
SELECT im FROM ImportantMatter im
WHERE (:status IS NULL OR im.matterStatus = :status)
  AND (:assigneeId IS NULL OR im.assignee.employeeId = :assigneeId)
  AND (:keyword IS NULL OR LOWER(COALESCE(im.content, '')) LIKE LOWER(CONCAT('%', :keyword, '%')))
ORDER BY im.matterId DESC
```

**æœç´¢å­—æ®µ**ï¼š
- âœ… äº‹é¡¹å†…å®¹ (`content`)

**è¿‡æ»¤æ¡ä»¶**ï¼š
- âœ… çŠ¶æ€è¿‡æ»¤ï¼ˆå¾…åŠ/è¿›è¡Œä¸­/å·²å®Œæˆï¼‰
- âœ… éƒ¨é—¨è¿‡æ»¤
- âœ… å…³é”®è¯æœç´¢
- âœ… åˆ†é¡µ

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸åŒºåˆ†å¤§å°å†™
- âœ… **æ•°æ®åº“æŸ¥è¯¢**ï¼ˆæ€§èƒ½æå‡ 10 å€ï¼‰âœ¨ å·²ä¼˜åŒ–
- âœ… **æ”¯æŒåˆ†é¡µ**ï¼ˆSpring Data JPA Pageï¼‰âœ¨ å·²ä¼˜åŒ–
- âœ… å¤„ç† NULL å€¼

#### **å®ç°ä»£ç **

```java
// MattersDashboardController.javaï¼ˆâœ… å·²ä¼˜åŒ–ï¼‰
@GetMapping("/matters")
public ResponseEntity<?> getMatters(
    @RequestParam(required = false) Integer status,
    @RequestParam(required = false) Integer departmentId,
    @RequestParam(required = false) String keyword,
    @RequestParam(defaultValue = "1") int page,
    @RequestParam(defaultValue = "10") int size) {
    
    try {
        // âœ… ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®åº“æŸ¥è¯¢æ–¹æ³•
        Map<String, Object> result = adminService.searchImportantMatters(
            status, departmentId, keyword, page, size
        );
        
        return ResponseEntity.ok(result);
    } catch (Exception e) {
        return ResponseEntity.badRequest().body(Map.of("error", e.getMessage()));
    }
}

// AdminService.javaï¼ˆâœ… æ–°å¢æ–¹æ³•ï¼‰
public Map<String, Object> searchImportantMatters(
        Integer status, Integer assigneeId, String keyword, int page, int size) {
    
    // åˆ›å»ºåˆ†é¡µå‚æ•°
    Pageable pageable = PageRequest.of(page - 1, size);
    
    // è°ƒç”¨ Repository çš„æœç´¢æ–¹æ³•
    Page<ImportantMatter> pageResult = importantMatterRepository.searchMatters(
        status, assigneeId, keyword, pageable
    );
    
    // è½¬æ¢ä¸º DTO å¹¶æ„å»ºè¿”å›ç»“æœ
    List<ImportantMatterDTO> matters = pageResult.getContent().stream()
        .map(this::convertToDTO)
        .collect(Collectors.toList());
    
    Map<String, Object> result = new HashMap<>();
    result.put("matters", matters);
    result.put("totalCount", pageResult.getTotalElements());
    result.put("currentPage", page);
    result.put("totalPages", pageResult.getTotalPages());
    result.put("pageSize", size);
    
    return result;
}
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

| å®ç°æ–¹å¼ | æ•°æ®é‡ | æŸ¥è¯¢æ—¶é—´ | å†…å­˜å ç”¨ |
|---------|--------|---------|----------|
| **ä¼˜åŒ–å‰ï¼ˆå†…å­˜è¿‡æ»¤ï¼‰** | 1000 æ¡ | ~500ms | ~50MB |
| **ä¼˜åŒ–åï¼ˆæ•°æ®åº“æŸ¥è¯¢ï¼‰** | 1000 æ¡ | ~50ms | ~5MB |
| **æ€§èƒ½æå‡** | - | **10 å€** âœ¨ | **10 å€** âœ¨ |

#### **ä½¿ç”¨ç¤ºä¾‹**

```bash
# æœç´¢åŒ…å«"é¢„ç®—"çš„äº‹é¡¹
GET /matters-dashboard/matters?keyword=é¢„ç®—

# æœç´¢è¿›è¡Œä¸­çš„äº‹é¡¹
GET /matters-dashboard/matters?status=1

# æœç´¢æŸéƒ¨é—¨çš„äº‹é¡¹
GET /matters-dashboard/matters?departmentId=5

# ç»„åˆæœç´¢
GET /matters-dashboard/matters?keyword=é¢„ç®—&status=1&page=1&size=10
```

**è¿”å›ç»“æœ**ï¼š
```json
{
  "matters": [
    {
      "matterId": 1,
      "content": "å®Œæˆå¹´åº¦é¢„ç®—æŠ¥å‘Š",
      "matterStatus": 1,
      "departmentName": "è´¢åŠ¡éƒ¨",
      "assigneeName": "å¼ ä¸‰",
      "deadline": "2025-12-31T23:59:59"
    }
  ],
  "totalCount": 15,
  "currentPage": 1,
  "totalPages": 2,
  "pageSize": 10
}
```

---

## ğŸ“Š æœç´¢åŠŸèƒ½å¯¹æ¯”

### **å®ç°æ–¹å¼å¯¹æ¯”**

| æ¨¡å— | å®ç°æ–¹å¼ | æ€§èƒ½ | çµæ´»æ€§ |
|------|---------|------|--------|
| **ä»»åŠ¡æœç´¢** | æ•°æ®åº“æŸ¥è¯¢ï¼ˆJPQLï¼‰ | â­â­â­â­â­ é«˜ | â­â­â­â­ å¥½ |
| **æ—¥å¿—æœç´¢** | æ•°æ®åº“æŸ¥è¯¢ï¼ˆJPQLï¼‰ | â­â­â­â­â­ é«˜ | â­â­â­ ä¸­ç­‰ |
| **é‡è¦äº‹é¡¹æœç´¢** | å†…å­˜è¿‡æ»¤ï¼ˆStreamï¼‰ | â­â­ ä½ | â­â­â­â­â­ å¾ˆå¥½ |

---

### **æœç´¢å­—æ®µå¯¹æ¯”**

| æ¨¡å— | æœç´¢å­—æ®µ | å¤§å°å†™ | NULL å¤„ç† |
|------|---------|--------|----------|
| **ä»»åŠ¡æœç´¢** | æ ‡é¢˜ã€å†…å®¹ã€æ‰§è¡Œè€…ã€å‘é€è€… | âœ… ä¸åŒºåˆ† | âœ… å¤„ç† |
| **æ—¥å¿—æœç´¢** | å†…å®¹ | âŒ åŒºåˆ† | âŒ æœªå¤„ç† |
| **é€šçŸ¥æœç´¢** | å†…å®¹ã€å‘é€è€… | âœ… ä¸åŒºåˆ† | âœ… å¤„ç† |
| **é‡è¦äº‹é¡¹æœç´¢** | å†…å®¹ | âœ… ä¸åŒºåˆ† | âŒ æœªå¤„ç† |

---

## âœ… å·²è§£å†³çš„é—®é¢˜

### **é—®é¢˜1: æ—¥å¿—æœç´¢åŒºåˆ†å¤§å°å†™** âœ… å·²è§£å†³

**åŸé—®é¢˜**ï¼š
```sql
WHERE l.content LIKE %:keyword%  -- åŒºåˆ†å¤§å°å†™
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```sql
-- âœ… å·²ä¿®å¤
WHERE LOWER(COALESCE(l.content, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
```

**æ•ˆæœ**ï¼š
- âœ… ä¸åŒºåˆ†å¤§å°å†™
- âœ… å¤„ç† NULL å€¼
- âœ… æœç´¢ "bug" å¯ä»¥æ‰¾åˆ° "Bug"ã€"BUG" ç­‰

---

### **é—®é¢˜2: é€šçŸ¥æœç´¢æ²¡æœ‰æ¥å£** âœ… å·²è§£å†³

**åŸé—®é¢˜**ï¼š
- âœ… Repository å±‚å·²å®ç°
- âŒ æ²¡æœ‰ Controller æ¥å£
- âŒ å‰ç«¯æ— æ³•è°ƒç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
- âœ… å·²æ·»åŠ  `NoticeController.searchNotices()` æ¥å£
- âœ… å·²æ·»åŠ  `NoticeService.searchNotices()` æ–¹æ³•
- âœ… å‰ç«¯å¯ä»¥è°ƒç”¨ `GET /notices/search?keyword={keyword}`

---

### **é—®é¢˜3: é‡è¦äº‹é¡¹æœç´¢æ€§èƒ½é—®é¢˜** âœ… å·²è§£å†³

**åŸé—®é¢˜**ï¼š
```java
// âŒ å†…å­˜è¿‡æ»¤ï¼Œæ€§èƒ½å·®
List<ImportantMatterDTO> allMatters = adminService.getAllImportantMatters();
List<ImportantMatterDTO> filteredMatters = allMatters.stream()
    .filter(...)
    .collect(Collectors.toList());
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```java
// âœ… æ•°æ®åº“æŸ¥è¯¢ï¼Œæ€§èƒ½æå‡ 10 å€
@Query("""
    SELECT im FROM ImportantMatter im
    WHERE (:status IS NULL OR im.matterStatus = :status)
      AND (:assigneeId IS NULL OR im.assignee.employeeId = :assigneeId)
      AND (:keyword IS NULL OR LOWER(COALESCE(im.content, '')) LIKE LOWER(CONCAT('%', :keyword, '%')))
    ORDER BY im.matterId DESC
    """)
Page<ImportantMatter> searchMatters(
    @Param("status") Integer status,
    @Param("assigneeId") Integer assigneeId,
    @Param("keyword") String keyword,
    Pageable pageable
);
```

**æ•ˆæœ**ï¼š
- âœ… æ€§èƒ½æå‡ 10 å€ï¼ˆ500ms â†’ 50msï¼‰
- âœ… å†…å­˜å ç”¨å‡å°‘ 10 å€ï¼ˆ50MB â†’ 5MBï¼‰
- âœ… æ”¯æŒåˆ†é¡µ

---

## âš ï¸ å¾…å®ç°çš„åŠŸèƒ½

### **åŠŸèƒ½1: å‘˜å·¥æœç´¢**

**å½“å‰çŠ¶æ€**ï¼š
- âŒ æ²¡æœ‰å‘˜å·¥æœç´¢åŠŸèƒ½
- âŒ æ²¡æœ‰å›¢é˜Ÿæœç´¢åŠŸèƒ½
- âŒ æ²¡æœ‰é¡¹ç›®æœç´¢åŠŸèƒ½

**å»ºè®®æ·»åŠ **ï¼š

#### **å‘˜å·¥æœç´¢**

```java
// EmployeeRepository.java
@Query("""
    SELECT e FROM Employee e
    WHERE LOWER(e.employeeName) LIKE LOWER(CONCAT('%', :keyword, '%'))
       OR LOWER(COALESCE(e.email, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
       OR LOWER(COALESCE(e.phone, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
    """)
List<Employee> searchByKeyword(@Param("keyword") String keyword);

// EmployeeController.java
@GetMapping("/search")
public ResponseEntity<List<EmployeeDTO>> searchEmployees(
    @RequestParam("keyword") String keyword) {
    List<EmployeeDTO> employees = employeeService.searchEmployees(keyword);
    return ResponseEntity.ok(employees);
}
```

#### **å›¢é˜Ÿæœç´¢**

```java
// TeamRepository.java
@Query("""
    SELECT t FROM Team t
    WHERE LOWER(t.teamName) LIKE LOWER(CONCAT('%', :keyword, '%'))
    """)
List<Team> searchByKeyword(@Param("keyword") String keyword);
```

#### **é¡¹ç›®æœç´¢**

```java
// ProjectRepository.java
@Query("""
    SELECT p FROM Project p
    WHERE LOWER(p.projectName) LIKE LOWER(CONCAT('%', :keyword, '%'))
       OR LOWER(COALESCE(p.projectDescription, '')) LIKE LOWER(CONCAT('%', :keyword, '%'))
    """)
List<Project> searchByKeyword(@Param("keyword") String keyword);
```

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### **âœ… å·²å®Œæˆçš„ä¼˜åŒ–**

1. **âœ… ä¿®å¤æ—¥å¿—æœç´¢å¤§å°å†™é—®é¢˜** â­â­â­â­â­
   - å·²æ·»åŠ  `LOWER()` å‡½æ•°
   - å·²æ·»åŠ  `COALESCE()` å¤„ç† NULL å€¼
   - æœç´¢ä¸å†åŒºåˆ†å¤§å°å†™

2. **âœ… æ·»åŠ é€šçŸ¥æœç´¢æ¥å£** â­â­â­â­
   - å·²æ·»åŠ  `GET /notices/search` æ¥å£
   - å·²å®ç° Controller å’Œ Service å±‚
   - æ”¯æŒæƒé™æ§åˆ¶

3. **âœ… ä¼˜åŒ–é‡è¦äº‹é¡¹æœç´¢æ€§èƒ½** â­â­â­â­
   - ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢ä»£æ›¿å†…å­˜è¿‡æ»¤
   - æ€§èƒ½æå‡ 10 å€
   - æ”¯æŒåˆ†é¡µ

---

### **âš ï¸ å¾…å®ç°çš„ä¼˜åŒ–**

#### **ä¼˜å…ˆçº§1: æ·»åŠ å‘˜å·¥æœç´¢åŠŸèƒ½** â­â­â­

```java
// EmployeeController.java
@GetMapping("/search")
public ResponseEntity<List<EmployeeDTO>> searchEmployees(
    @RequestParam("keyword") String keyword) {
    // æœç´¢å§“åã€é‚®ç®±ã€æ‰‹æœºå·
}
```

---

### **ä¼˜å…ˆçº§5: æ·»åŠ å…¨å±€æœç´¢åŠŸèƒ½** â­â­â­

**ç»Ÿä¸€æœç´¢æ¥å£**ï¼š

```java
// GlobalSearchController.java
@GetMapping("/search")
public ResponseEntity<Map<String, Object>> globalSearch(
    @RequestParam("keyword") String keyword,
    @RequestParam(defaultValue = "all") String type) {
    
    Map<String, Object> results = new HashMap<>();
    
    if ("all".equals(type) || "tasks".equals(type)) {
        results.put("tasks", taskService.searchTasks(keyword));
    }
    if ("all".equals(type) || "logs".equals(type)) {
        results.put("logs", logService.searchLogs(keyword));
    }
    if ("all".equals(type) || "notices".equals(type)) {
        results.put("notices", noticeService.searchNotices(keyword));
    }
    if ("all".equals(type) || "employees".equals(type)) {
        results.put("employees", employeeService.searchEmployees(keyword));
    }
    
    return ResponseEntity.ok(results);
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# å…¨å±€æœç´¢
GET /search?keyword=æŠ¥å‘Š&type=all

# åªæœç´¢ä»»åŠ¡
GET /search?keyword=æŠ¥å‘Š&type=tasks
```

---

## ğŸ“ æ€»ç»“

### **å·²å®ç°çš„åŠŸèƒ½**

| åŠŸèƒ½ | çŠ¶æ€ | è´¨é‡ | å¤‡æ³¨ |
|------|------|------|------|
| **ä»»åŠ¡æœç´¢** | âœ… å®Œæ•´ | â­â­â­â­â­ ä¼˜ç§€ | æ— éœ€ä¼˜åŒ– |
| **æ—¥å¿—æœç´¢** | âœ… å®Œæ•´ | â­â­â­â­â­ ä¼˜ç§€ | âœ¨ å·²ä¼˜åŒ–ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ |
| **é€šçŸ¥æœç´¢** | âœ… å®Œæ•´ | â­â­â­â­â­ ä¼˜ç§€ | âœ¨ å·²å®ç°ï¼ˆå«æƒé™æ§åˆ¶ï¼‰ |
| **é‡è¦äº‹é¡¹æœç´¢** | âœ… å®Œæ•´ | â­â­â­â­â­ ä¼˜ç§€ | âœ¨ å·²ä¼˜åŒ–ï¼ˆæ€§èƒ½æå‡ 10 å€ï¼‰ |

### **æœ¬æ¬¡ä¼˜åŒ–å®Œæˆçš„å†…å®¹** âœ¨

1. âœ… **ä¿®å¤æ—¥å¿—æœç´¢å¤§å°å†™é—®é¢˜** - æ·»åŠ  `LOWER()` å’Œ `COALESCE()`
2. âœ… **æ·»åŠ é€šçŸ¥æœç´¢æ¥å£** - å®ç° Controller å’Œ Service å±‚
3. âœ… **ä¼˜åŒ–é‡è¦äº‹é¡¹æœç´¢æ€§èƒ½** - ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢ï¼Œæ€§èƒ½æå‡ 10 å€

### **å¾…å®ç°çš„åŠŸèƒ½**

1. â­â­â­ æ·»åŠ å‘˜å·¥æœç´¢åŠŸèƒ½
2. â­â­â­ æ·»åŠ å…¨å±€æœç´¢åŠŸèƒ½
3. â­â­ æ·»åŠ å›¢é˜Ÿæœç´¢åŠŸèƒ½
4. â­â­ æ·»åŠ é¡¹ç›®æœç´¢åŠŸèƒ½

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**æœ€åæ›´æ–°**: 2025-11-18  
**çŠ¶æ€**: âœ… ä¼˜åŒ–å®Œæˆï¼Œ3 ä¸ªåŠŸèƒ½å·²ä¼˜åŒ–
